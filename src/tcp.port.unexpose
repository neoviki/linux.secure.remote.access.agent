#!/bin/bash

: '
	Utility to Expose Local TCP Port to Internet
	
	Author	: 	Viki ( a ) V Natarajan
	Contact	:	https://viki.design
'

if [ -z "$1" ]; then
    echo "[ usage ] ./tcp.port.unexpose <port_number>"
    exit 1
fi

PORT_NUMBER=$1

ps -ef | grep "tcp.port.expose" | grep -v "grep" | awk '{print $2}' | xargs -I{} kill -9 {}
ps -ef | grep "ssh" | grep "StrictHostKeyChecking" | grep ":localhost:$PORT_NUMBER" | grep -v "grep" | awk '{print $2}' | xargs -I{} kill -9 {}
